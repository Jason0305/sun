<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>登录</title>
    <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="js/jquery1.42.min.js"></script>
    <script type="text/javascript" src="js/jquery.SuperSlide.2.1.1.js"></script>
    <script type="text/javascript" src="js/publicNav.js"></script>
    <script type="text/javascript" src="js/jquery.blockUI.js"></script>
    <script type="text/javascript" src="js/jquery.cookie.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/formDataCheck.js"></script>
    <link rel="stylesheet" type="text/css" href="css/base.css"/>
</head>

<body>
<div class="logo_blk">
    <div class="logo">
        <img src="images/logo.png" width="260" height="75">
    </div>
</div>
<div class="jdCont" style="background: #f5f5f5;height: 390px;width: 1015px;">
    <div class="login_box">
        <div class="pic">
            <img src="images/login_bg.jpg"/>
        </div>
        <div class="login_form">
            <form id="loginForm">
                <h3 style="font-size:15px;">宠物商城</h3>
                <div class="login_list">
                    <p class="login_cont">
                        <input type="text" class="login_txt style_border"
                               name="username" id="login_user" autocomplete="off" maxlength="20">
                        <span class="user_icon"></span>
                        <label for="password" class="prompt_login1">邮箱/手机号/昵称</label>
                    <div id="login_username" class="msg_error"></div>
                    </p>
                </div>
                <div class="login_list">
                    <p class="login_cont">
                        <input class="login_txt style_border" type="text" placeholder="密码"
                               name="password" id="password" maxlength="20"/>
                        <span class="pwd_icon"></span>
                        <label for="password" class="prompt_login1">密码</label>
                        <span id=""></span>
                    <div id="login_pwd_error" class="msg_error"></div>
                    </p>
                </div>
                <div class="login_options">
                    <input type="checkbox" id="autoLogin">
                    <label for="autoLogin">记住密码</label>
                    <span>
                    <a href="#" class="login_to">忘记密码</a>
                    <span>&nbsp;|&nbsp;</span><a href="register.jsp" class="login_to">免费注册</a>
                </span>
                </div>
            </form>
            <div class="login_btn_wrap">
                <button type="button" class="login_btn" id="loginBtn">立即登录</button>
            </div>

            <div class="fast_login">
                <h3>合作网站账户登录</h3>
                <div class="fast_way">
                    <a href="javascript:;" class="qq_way"></a>
                    <a href="javascript:;" class="sina_way"></a>
                    <a href="javascript:;" class="weixin_way"></a>
                </div>
                <div class="more_way_wrap">
                    <a><h4>更多登录方式&gt;&gt;</h4></a>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    console.log(FormReg.formCheck("邮箱: " + "2141243@qq.com", "邮箱", "email,phone,username",));
    $(function () {
        $(".login_txt").focus(function () {
            $(this).addClass("login_focus");
            $(this).removeClass("style_border");
            if ($(this).val() === this.defaultValue) {
                $(this).val("");
            }
        }).blur(function () {
            $(this).removeClass("login_focus");
            $(this).addClass("style_border");
            if ($(this).val() === '') {
                $(this).val(this.defaultValue);
            }
        });
    });

    $("#login_user").bind("focus", function () {
        document.getElementById("login_username").innerHTML = "请输入您的用户名或注册邮箱";
    });

    $("#password").bind("focus", function () {
        document.getElementById("login_pwd_error").innerHTML = "请输入密码";
        $('.prompt_login1').css('display', 'none');
    });

    $("#login_user").bind("blur", function () {
        const username = this.value;
        if (username == null || username == '') {
            login_username.innerHTML = "用户名不能为空";
        } else if (username.length < 1) {
            login_username.innerHTML = "请输入您的用户名或注册邮箱";
        } else {
            login_username.innerHTML = "<img src='images/right.gif'></img>";
            login_username.innerHTML = "";
        }
    });


    /** 当密码输入框内容改变，校验合法性 */
    $("#username,#password").bind("blur", function () {
        const value = this.value;
        if (password == null || password == '') {
            document.getElementById("login_pwd_error").innerHTML = "请输入" + this.name;
            $('.prompt_login1').css('display', 'block');
        } else if (password.length < 6) {
            document.getElementById("login_pwd_error").innerHTML = "请输入至少6位以字母开头，数字或符号";
            $('.prompt_login1').css('display', 'none');
        } else {
            document.getElementById("login_pwd_error").innerHTML="<img src='images/right.gif'></img>";
            document.getElementById("login_pwd_error").innerHTML = "";
        }
    });

    /** 页面加载时将记住的密码信息填充到页面 */
    $(function () {
        //页面加载先前记录的用户信息并选择填充到页面
        if ($.cookie("isAutoLogin") === "true") {
            $("#autoLogin").attr({checked: "checked"});
            $("#loginForm input[name='username']").val($.cookie("username"));
            $("#loginForm input[name='password']").val($.cookie("password"));
        }
    });

    function formTip(dom, msg, isRight) {
        let color = isRight ? green : red;
        $(dom).next().text(msg);

    }

    /** 记住密码 */
    function rememberUserInfo() {
        if ($("#autoLogin").is(":checked")) {
            $.cookie("isAutoLogin", "true", {expires: 7});
            $.cookie("username", $("#loginForm input[name='username']").val(), {expires: 7});
            $.cookie("password", $("#loginForm input[name='password']").val(), {expires: 7});
        } else {
            $.cookie("isAutoLogin", "false");
            $.cookie("username", null);
            $.cookie("password", null);
        }
    }

    /** 执行登录操作 */
    loginBtn.onclick = function () {
        console.log("cookie.password:" + $.cookie("password"));
        $.ajax({
            url: "user/login.do",
            data: $("#loginForm").serialize(),
            type: "get",
            dataType: "json",
            beforeSend: function () {
                console.log("send Before...");
                $.blockUI({message: '<h1>Just a moment...</h1>'});
            },
            success: function (data) {
                alert(data.status);
                console.log("response success...");
                if (data.status == 600) {
                    rememberUserInfo();
                    location.href = "index.html"
                } else if (data.status == 601) {
                    alert("用户不存在！");
                } else if (data.status == 602) {
                    alert("密码输入错误");
                }
            },
            complete() {
                setTimeout($.unblockUI, 200);
            }
        });
    };

    /** 账号第三方登录功能不可用提示 */
    $(".fast_login a").bind("click", function () {
        alert("该功能暂未开通！敬请期待！");
        return false;
    });
</script>

<!--footer搜索-->
<div class="indexContFooter" style="height: auto;">
    <!--底层foot-start-->
    <div class="footer_center" style="margin-top: 10px;">
        <div class="links">
            <a href="javascript:;">关于我们</a>|
            <a href="javascript:;">联系我们</a>|
            <a href="javascript:;">友情链接</a>|
            <a href="javascript:;">免责条款</a>|
            <a href="javascript:;">广告服务</a>|
            <a href="javascript:;">食品流通许可证</a>|
            <a href="javascript:;">营业执照</a>
        </div>
    </div>
    <div class="footer_copyright">
        <p> Copyright © 2014-2019 5RICE.吾米网 版权所有 黑ICP备11002788号 保留一切权利。 客服热线：400-400-5555 </p>
        <p>京公网安备 110105001608 | 京ICP证111033号 | 食品流通许可证 SP1101051110165515（1-1） | 营业执照</p>
    </div>
    <div class="footer_cx">
        <p>
            <a href="javascript:;"><img src="images/footerbomC.png" width="112" height="40"></a>
            <a href="javascript:;"><img src="images/footerbomX.gif" width="112" height="40"></a>

        </p>
    </div>
</div>
<!--底层foot]]-->
</body>
</html>
